name: Knight
on:
  push:
    branches:
      - main
env:
  APPLICATION_NAME: Knight
  NODE_VERSION: 18.16.0
jobs:
  # lint:
  #   name: Lint
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Checkout Repository
  #       uses: actions/checkout@v2
  #     - name: setup node enviroment
  #       uses: actions/setup-node@v2
  #       with:
  #         node-version: ${{env.NODE_VERSION}}
  #     - name: Install Dependencies
  #       run: npm install
  #     - name: Run ESLint
  #       run: npm run lint
  #     - name: run test
  #       run: npm test

  # unit-testing:
  #   name: Unti test
  #   needs: lint
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Checkout Repository
  #       uses: actions/checkout@v2

  #     - name: Set Up Node.js
  #       uses: actions/setup-node@v2
  #       with:
  #         node-version: ${{env.NODE_VERSION}}

  #     - name: Install Dependencies
  #       run: npm install

  #     - name: Run Unit Tests
  #       run: npm test

  build-app:
    name: Build App
    # needs: unit-testing
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Set Up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: ${{env.NODE_VERSION}}

      - name: Install Dependencies
        run: npm install
      - name: Run build
        run: npm run build

  deploy-app:
    name: Deploy App
    needs: build-app
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Set Up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: ${{env.NODE_VERSION}}

      - name: Install Dependencies
        run: npm install

      - name: Run build
        run: npm run build

      - name: Deploy App
        uses: JamesIves/github-pages-deploy-action@4.1.5
        with:
          branch: knights
          folder: build
